<!DOCTYPE html>
<html>
<head>
  <title>BTC Ads Earnings</title>
  <style>
    body { font-family: Arial; background: #fff; color: #111; text-align: center; padding: 20px; }
    input, button { padding: 10px; margin: 10px; width: 80%; max-width: 400px; }
    #info { margin-top: 30px; font-size: 14px; color: #555; }
  </style>
</head>
<body>
  <h1>Earn Free BTC by Staying on This Page!</h1>
  <input id="wallet" placeholder="Enter your BTC Wallet Address">
  <button onclick="saveAddress()">Save</button>
  <div id="status"></div>
  <div id="timer">60</div>
  <div id="balance">Balance: 0.0000000 BTC</div>
  <div id="info">
    Stay on the page and earn 0.0000001 BTC every 60 seconds automatically.<br>
    Your address and balance are saved even if you refresh the page.
  </div>
  <script>
    let timer = 60;
    let address = localStorage.getItem('btc_address');
    if (address) document.getElementById('wallet').value = address;

    async function saveAddress() {
      address = document.getElementById('wallet').value;
      if (address) {
        localStorage.setItem('btc_address', address);
        await fetch('/save_address', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({address})
        });
        document.getElementById('status').innerText = 'Address Saved!';
      }
    }

    async function updateBalance() {
      if (!address) return;
      const res = await fetch('/update_balance', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({address})
      });
      const data = await res.json();
      document.getElementById('balance').innerText = 'Balance: ' + data.balance.toFixed(7) + ' BTC';
    }

    setInterval(() => {
      if (timer > 0) {
        timer--;
        document.getElementById('timer').innerText = timer;
      } else {
        updateBalance();
        timer = 60;
      }
    }, 1000);
  </script>
</body>
</html>
