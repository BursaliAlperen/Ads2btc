<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Earn BTC by Staying Online</title>
    <style>
        body { font-family: Arial, sans-serif; background: #f4f4f4; text-align: center; padding: 40px; }
        .container { background: white; padding: 20px; border-radius: 10px; display: inline-block; }
        input, button { padding: 10px; margin: 10px; width: 300px; }
        .info { font-size: 14px; color: #444; margin-top: 20px; }
    </style>
</head>
<body>
<div class="container">
    <h2>Earn Free BTC</h2>
    <input type="text" id="btcAddress" placeholder="Enter your BTC Wallet Address"><br>
    <button onclick="saveAddress()">Save Address</button>
    <div class="info">Stay on this page. Earn 0.0000001 BTC every 60 seconds.<br>Minimum withdrawal: 0.000001 BTC</div>
    <div style="margin-top:20px;">
        <div><b>BTC Earned:</b> <span id="btcCount">0</span></div>
        <div><b>Next Reward In:</b> <span id="countdown">60</span> seconds</div>
    </div>
</div>
<script>
    let btc = parseFloat(localStorage.getItem("btc") || 0);
    let address = localStorage.getItem("btcAddress") || "";

    document.getElementById("btcAddress").value = address;
    document.getElementById("btcCount").innerText = btc.toFixed(7);

    function saveAddress() {
        const input = document.getElementById("btcAddress").value;
        if (input) {
            localStorage.setItem("btcAddress", input);
            alert("BTC Address saved.");
        }
    }

    let seconds = 60;
    const countdownEl = document.getElementById("countdown");
    setInterval(() => {
        seconds--;
        if (seconds <= 0) {
            btc += 0.0000001;
            localStorage.setItem("btc", btc);
            document.getElementById("btcCount").innerText = btc.toFixed(7);
            seconds = 60;
            if (btc >= 0.000001) {
                const address = localStorage.getItem("btcAddress") || "";
                if (address) {
                    fetch('/withdraw', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ address: address, amount: btc })
                    });
                    btc = 0;
                    localStorage.setItem("btc", btc);
                    document.getElementById("btcCount").innerText = btc.toFixed(7);
                    alert("Withdrawal request sent.");
                }
            }
        }
        countdownEl.innerText = seconds;
    }, 1000);
</script>
</body>
</html>